---
title: HTTP相关
date: 2020-07-08 15:15:07
categories:
	- Java面试
	- 计算机网络
---

#### Http简介

>超文本传输协议（英文：HyperText Transfer Protocol，缩写：HTTP）是一种用于分布式、协作式和超媒体信息系统的应用层协议。HTTP是万维网的数据通信的基础。
>HTTP的发展是由蒂姆·伯纳斯-李于1989年在欧洲核子研究组织（CERN）所发起。HTTP的标准制定由万维网协会（World Wide Web Consortium，W3C）和互联网工程任务组（Internet Engineering Task Force，IETF）进行协调，最终发布了一系列的RFC，其中最著名的是1999年6月公布的 RFC 2616，定义了HTTP协议中现今广泛使用的一个版本——HTTP 1.1。
>2014年12月，互联网工程任务组（IETF）的Hypertext Transfer Protocol Bis（httpbis）工作小组将HTTP/2标准提议递交至IESG进行讨论，于2015年2月17日被批准。 HTTP/2标准于2015年5月以RFC 7540正式发表，取代HTTP 1.1成为HTTP的实现标准。
>
>HTTP是一个属于应用层的面向对象的协议，HTTP是一个基于TCP/IP通信协议来传递数据（HTML 文件, 图片文件, 查询结果等）。



<!--more-->

![HTTP](/articleImage/2020-07-08/1.jpg)

#### Http特点

**1.支持客户/服务器模式**
	HTTP协议工作于客户端-服务端架构为上。浏览器作为HTTP客户端通过URL向HTTP服务端即WEB服务器发送所有请求。Web服务器根据接收到的请求后，向客户端发送响应信息。

**2.简单快速**
	客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有GET、HEAD、POST。每种方法规定了客户与服务器联系的类型不同。由于HTTP协议简单，使得HTTP服务器的程序规模小，因而通信速度很快。

**3.灵活**
	HTTP允许传输任意类型的数据对象。正在传输的类型由Content-Type加以标记。

**4.无连接**
	无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。

**5.无状态**
	HTTP协议是无状态协议。无状态是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快。

#### Http请求

![HTTP](/articleImage/2020-07-08/2.jpg)

客户端发送一个HTTP请求到服务器的请求消息包括以下格式：
第一部分：请求行，第一行明了是post请求，以及http1.1版本。
第二部分：请求头部，第二行至第六行。
第三部分：空行，第七行的空行。
第四部分：请求数据，第八行。

![HTTP](/articleImage/2020-07-08/3.png)

#### Http响应

![HTTP](/articleImage/2020-07-08/3.jpg)

HTTP响应也由四个部分组成，分别是：状态行、消息报头、空行和响应正文。

第一部分：状态行，由HTTP协议版本号， 状态码， 状态消息 三部分组成。
第二部分：消息报头，用来说明客户端要使用的一些附加信息
第三部分：空行，消息报头后面的空行是必须的
第四部分：响应正文，服务器返回给客户端的文本信息。

![HTTP](/articleImage/2020-07-08/4.png)

#### Http状态码

状态代码有三位数字组成，第一个数字定义了响应的类别，共分五种类别:

> **1xx：指示信息--表示请求已接收，继续处理**
> **2xx：成功--表示请求已被成功接收、理解、接受**
> **3xx：重定向--要完成请求必须进行更进一步的操作**
> **4xx：客户端错误--请求有语法错误或请求无法实现**
> **5xx：服务器端错误--服务器未能实现合法的请求**

**常见状态码：**

- 200 OK                        //客户端请求成功
- 400 Bad Request               //客户端请求有语法错误，不能被服务器所理解
- 401 Unauthorized              //请求未经授权，这个状态代码必须和WWW-Authenticate报头域一起使用 
- 403 Forbidden                 //服务器收到请求，但是拒绝提供服务
- 404 Not Found                 //请求资源不存在，eg：输入了错误的URL
- 500 Internal Server Error     //服务器发生不可预期的错误
- 503 Server Unavailable        //服务器当前不能处理客户端的请求，一段时间后可能恢复正常

#### HTTP请求方法

根据HTTP标准，HTTP请求可以使用多种请求方法。
HTTP1.0定义了三种请求方法： GET, POST 和 HEAD方法。
HTTP1.1新增了五种请求方法：OPTIONS, PUT, DELETE, TRACE 和 CONNECT 方法。

- GET     请求指定的页面信息，并返回实体主体。
- HEAD     类似于get请求，只不过返回的响应中没有具体的内容，用于获取报头。
- POST     向指定资源提交数据进行处理请求（例如提交表单或者上传文件）。数据被包含在请求体中。
  POST请求可能会导致新的资源的建立和/或已有资源的修改。
- PUT     从客户端向服务器传送的数据取代指定的文档的内容。
- DELETE      请求服务器删除指定的页面。
- CONNECT     HTTP/1.1协议中预留给能够将连接改为管道方式的代理服务器。
- OPTIONS     允许客户端查看服务器的性能。
- TRACE     回显服务器收到的请求，主要用于测试或诊断。

#### HTTP工作原理

HTTP协议定义Web客户端如何从Web服务器请求Web页面，以及服务器如何把Web页面传送给客户端。HTTP协议采用了请求/响应模型。客户端向服务器发送一个请求报文，请求报文包含请求的方法、URL、协议版本、请求头部和请求数据。服务器以一个状态行作为响应，响应的内容包括协议的版本、成功或者错误代码、服务器信息、响应头部和响应数据。
以下是 HTTP 请求/响应的步骤：

1、客户端连接到Web服务器
	一个HTTP客户端，通常是浏览器，与Web服务器的HTTP端口（默认为80）建立一个TCP套接字连接。
2、发送HTTP请求
	通过TCP套接字，客户端向Web服务器发送一个文本的请求报文，一个请求报文由请求行、请求头部、空行和请求数据4部分组成。
3、服务器接受请求并返回HTTP响应
	Web服务器解析请求，定位请求资源。服务器将资源复本写到TCP套接字，由客户端读取。一个响应由状态行、响应头部、空行和响应数据4部分组成。
4、释放连接TCP连接
	若connection 模式为close，则服务器主动关闭TCP连接，客户端被动关闭连接，释放TCP连接;若connection 模式为keepalive，则该连接会保持一段时间，在该时间内可以继续接收请求。
5、客户端浏览器解析HTML内容
	客户端浏览器首先解析状态行，查看表明请求是否成功的状态代码。然后解析每一个响应头，响应头告知以下为若干字节的HTML文档和文档的字符集。客户端浏览器读取响应数据HTML，根据HTML的语法对其进行格式化，并在浏览器窗口中显示。

在浏览器地址栏键入URL，按下回车之后会经历以下流程：

1、浏览器向 DNS 服务器请求解析该 URL 中的域名所对应的 IP 地址;
2、解析出 IP 地址后，根据该 IP 地址和默认端口 80，和服务器建立TCP连接;
3、浏览器发出读取文件(URL 中域名后面部分对应的文件)的HTTP 请求，该请求报文作为 TCP 三次握手的第三个报文的数据发送给服务器;
4、服务器对浏览器请求作出响应，并把对应的 html 文本发送给浏览器;
5、释放 TCP连接;
6、浏览器将该 html 文本并显示内容;

#### GET和POST请求的区别

Http报文层面：GET请求的信息放在URL，POST请求信息放置在报文体中。
数据库层面：GET请求符合幂等性和安全性的，POST不符合。
其他层面：GET可以被缓存（浏览器书签、CDN）、存储，POST依赖Web服务端。

#### Cookie与Session

Cookie简介

- 是由服务器发给客户端的特殊信息，以文本的形式存放在客户端
- 客户端再次请求的时候，会把Cookie回发
- 服务器接收到后，会解析Cookie生成与客户端相对应的内容

Session简介

- 服务器端的机制，在服务器上保存的信息
- 解析客户端请求并操作session id，按需保存状态信息

Session的实现方式

- 使用Cookie实现
- 使用URL回写来实现，带上JSESSIONID参数

Cookie和Session的区别

- Cookie数据存放在客户的浏览器上，Session数据放在服务器上
- Session相对于Cookie更安全
- 若考虑减轻服务器负担，应当使用Cookie

